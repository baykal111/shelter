{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ü—Ä–∏—é—Ç "–í–µ—Ä–Ω—ã–µ –¥—Ä—É–∑—å—è"{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <a href="{% url 'home' %}" class="logo">üêæ –í–µ—Ä–Ω—ã–µ –¥—Ä—É–∑—å—è</a>
            <ul class="nav-links">
                <li><a href="{% url 'animals_list' %}">–ñ–∏–≤–æ—Ç–Ω—ã–µ</a></li>
                <li><a href="{% url 'about' %}">–û –ø—Ä–∏—é—Ç–µ</a></li>
                <li><a href="{% url 'help' %}">–ü–æ–º–æ—á—å</a></li>
                <li><a href="{% url 'contact' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'profile' %}">üë§ {{ user.username }}</a></li>
                    <li><a href="{% url 'logout' %}" class="btn-login">–í—ã–π—Ç–∏</a></li>
                {% else %}
                    <li><a href="#" class="btn-login" onclick="openLoginModal()">–í–æ–π—Ç–∏</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>–ü–æ–¥–∞—Ä–∏—Ç–µ –¥–æ–º –Ω–∞—à–∏–º –¥—Ä—É–∑—å—è–º!</h1>
            <p>–ö–∞–∂–¥–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –ª—é–±–≤–∏ –∏ –∑–∞–±–æ—Ç—ã. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –≤–µ—Ä–Ω–æ–≥–æ –¥—Ä—É–≥–∞ —Å—Ä–µ–¥–∏ –Ω–∞—à–∏—Ö –ø–∏—Ç–æ–º—Ü–µ–≤</p>
            <button class="btn-primary" onclick="scrollToSearch()">
                –ù–∞–π—Ç–∏ –¥—Ä—É–≥–∞
            </button>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section" id="search">
        <div class="search-card">
            <form method="GET" action="{% url 'animals_list' %}" id="searchForm">
                <div class="search-filters">
                    <div class="filter-group">
                        <label>–¢–∏–ø –∂–∏–≤–æ—Ç–Ω–æ–≥–æ</label>
                        <select name="animal_type" id="animalType">
                            <option value="">–í—Å–µ</option>
                            <option value="dog">–°–æ–±–∞–∫–∏</option>
                            <option value="cat">–ö–æ—à–∫–∏</option>
                            <option value="other">–î—Ä—É–≥–∏–µ</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–í–æ–∑—Ä–∞—Å—Ç</label>
                        <select name="age" id="age">
                            <option value="">–õ—é–±–æ–π</option>
                            <option value="young">–î–æ 1 –≥–æ–¥–∞</option>
                            <option value="adult">1-7 –ª–µ—Ç</option>
                            <option value="senior">–°—Ç–∞—Ä—à–µ 7 –ª–µ—Ç</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–ü–æ–ª</label>
                        <select name="gender" id="gender">
                            <option value="">–õ—é–±–æ–π</option>
                            <option value="male">–°–∞–º–µ—Ü</option>
                            <option value="female">–°–∞–º–∫–∞</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–†–∞–∑–º–µ—Ä</label>
                        <select name="size" id="size">
                            <option value="">–õ—é–±–æ–π</option>
                            <option value="small">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="large">–ö—Ä—É–ø–Ω—ã–π</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn-search">üîç –ù–∞–π—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞</button>
            </form>
        </div>
    </section>

    <!-- Animals Section -->
    <section class="animals-section" id="animals">
        <h2 class="section-title">–ù–∞—à–∏ –ø–∏—Ç–æ–º—Ü—ã –∏—â—É—Ç –¥–æ–º</h2>
        <div class="animals-grid" id="animalsGrid">
            {% for animal in animals %}
            <div class="animal-card" onclick="window.location.href='{% url "animal.detail" animal.id %}'">
                <div class="animal-image">
                    {% if animal.photo %}
                        <img src="{{ animal.photo.url }}" alt="{{ animal.name }}">
                    {% else %}
                        <span>{{ animal.get_emoji }}</span>
                    {% endif %}
                    <span class="animal-badge">{{ animal.status }}</span>
                </div>
                <div class="animal-info">
                    <h3 class="animal-name">{{ animal.name }}</h3>
                    <p class="animal-details">{{ animal.get_age_display }} ‚Ä¢ {{ animal.get_gender_display }} ‚Ä¢ {{ animal.get_size_display }}</p>
                    <p class="animal-description">{{ animal.description|truncatewords:15 }}</p>
                    <button class="btn-reserve" onclick="event.stopPropagation(); openReserveModal({ animal.id }, '{{ animal.name }}')">
                        üìÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É
                    </button>
                </div>
            </div>
            {% empty %}
            <p style="grid-column: 1/-1; text-align: center; color: var(--gray);">–ñ–∏–≤–æ—Ç–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
            {% endfor %}
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>–û –ø—Ä–∏—é—Ç–µ</h3>
                <ul>
                    <li><a href="{% url 'about' %}">–ù–∞—à–∞ –º–∏—Å—Å–∏—è</a></li>
                    <li><a href="{% url 'team' %}">–ö–æ–º–∞–Ω–¥–∞</a></li>
                    <li><a href="{% url 'reports' %}">–û—Ç—á–µ—Ç—ã</a></li>
                    <li><a href="{% url 'careers' %}">–í–∞–∫–∞–Ω—Å–∏–∏</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>–ü–æ–º–æ—â—å</h3>
                <ul>
                    <li><a href="{% url 'adoption_guide' %}">–ö–∞–∫ —É—Å—ã–Ω–æ–≤–∏—Ç—å</a></li>
                    <li><a href="{% url 'donations' %}">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è</a></li>
                    <li><a href="{% url 'volunteer' %}">–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ</a></li>
                    <li><a href="{% url 'faq' %}">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-section contact-info">
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <p>üìç —É–ª. –õ–µ–Ω–∏–Ω–∞, 123, –ú–æ—Å–∫–≤–∞</p>
                <p>üìû +7 (495) 123-45-67</p>
                <p>‚úâÔ∏è info@shelter.ru</p>
                <div class="social-links">
                    <a href="#" class="social-icon">VK</a>
                    <a href="#" class="social-icon">TG</a>
                    <a href="#" class="social-icon">YT</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                <ul>
                    <li><a href="#" onclick="openSupportModal()">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</a></li>
                    <li><a href="{% url 'terms' %}">–ü—Ä–∞–≤–∏–ª–∞</a></li>
                    <li><a href="{% url 'privacy' %}">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 –ü—Ä–∏—é—Ç "–í–µ—Ä–Ω—ã–µ –¥—Ä—É–∑—å—è". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
                <button class="close-modal" onclick="closeLoginModal()">&times;</button>
            </div>
            <form method="POST" action="{% url 'login' %}" onsubmit="handleLogin(event)">
                {% csrf_token %}
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn-search">–í–æ–π—Ç–∏</button>
                <p style="text-align: center; margin-top: 1rem;">
                    –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" style="color: var(--primary);" onclick="openRegisterModal()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <button class="close-modal" onclick="closeRegisterModal()">&times;</button>
            </div>
            <form method="POST" action="{% url 'register' %}" onsubmit="handleRegister(event)">
                {% csrf_token %}
                <div class="form-group">
                    <label>–ò–º—è</label>
                    <input type="text" name="first_name" required placeholder="–ò–≤–∞–Ω">
                </div>
                <div class="form-group">
                    <label>–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" name="last_name" required placeholder="–ò–≤–∞–Ω–æ–≤">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" name="phone" required placeholder="+7 (999) 123-45-67">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    <input type="password" name="password_confirm" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn-search">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <p style="text-align: center; margin-top: 1rem;">
                    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" style="color: var(--primary);" onclick="openLoginModal()">–í–æ–π—Ç–∏</a>
                </p>
            </form>
        </div>
    </div>

    <!-- Reserve Modal -->
    <div class="modal" id="reserveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É</h2>
                <button class="close-modal" onclick="closeReserveModal()">&times;</button>
            </div>
            <form method="POST" action="{% url 'create_reservation' %}" onsubmit="handleReservation(event)">
                {% csrf_token %}
                <input type="hidden" name="animal_id" id="reserveAnimalId">
                <div class="form-group">
                    <label>–ñ–∏–≤–æ—Ç–Ω–æ–µ</label>
                    <input type="text" id="reserveAnimalName" readonly>
                </div>
                <div class="form-group">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <input type="text" name="name" required placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" value="{% if user.is_authenticated %}{{ user.get_full_name }}{% endif %}">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" name="phone" required placeholder="+7 (999) 123-45-67" value="{% if user.is_authenticated %}{{ user.phone }}{% endif %}">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="your@email.com" value="{% if user.is_authenticated %}{{ user.email }}{% endif %}">
                </div>
                <div class="form-group">
                    <label>–î–∞—Ç–∞ –ø–æ—Å–µ—â–µ–Ω–∏—è</label>
                    <input type="date" name="visit_date" required>
                </div>
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <textarea name="comment" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ –∏ —Å–≤–æ–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ"></textarea>
                </div>
                <button type="submit" class="btn-search">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </form>
        </div>
    </div>

    <!-- Support Modal -->
    <div class="modal" id="supportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">–°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h2>
                <button class="close-modal" onclick="closeSupportModal()">&times;</button>
            </div>
            <form method="POST" action="{% url 'support_request' %}" onsubmit="handleSupport(event)">
                {% csrf_token %}
                <div class="form-group">
                    <label>–ò–º—è</label>
                    <input type="text" name="name" required placeholder="–í–∞—à–µ –∏–º—è" value="{% if user.is_authenticated %}{{ user.get_full_name }}{% endif %}">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="your@email.com" value="{% if user.is_authenticated %}{{ user.email }}{% endif %}">
                </div>
                <div class="form-group">
                    <label>–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                    <select name="subject" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É</option>
                        <option value="adoption">–í–æ–ø—Ä–æ—Å –æ–± —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–∏</option>
                        <option value="volunteer">–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ</option>
                        <option value="donation">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è</option>
                        <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</option>
                        <option value="other">–î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                    <textarea name="message" required placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å"></textarea>
                </div>
                <button type="submit" class="btn-search">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
    <div id="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
